<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ECMAScript 6 Demo</title>

    <link rel="stylesheet" href="./styles/bootstrap.css">
    <link rel="stylesheet" href="./styles/main.css">

    <script type="text/javascript">
    </script>
</head>
<body>
<div class="container" >
    <h2>ECMAScript 6 Demo</h2>
    <hr />
    <h3>变量解构赋值</h3>

    <h4>数组的解构赋值</h4>
    <script type="text/javascript">
        let [a, b, c] = [1, 2, 3];

        let [foo, [[bar], baz]] = [1, [[2], 3]];

        let [ , , third] = ["foo", "bar", "baz"];

        let [x, , y] = [1, 2, 3];

        let [head, ...tail] = [1, 2, 3, 4];
        // head -> 1
        // tail -> [2, 3, 4]

        let [i, j, ...k] = ['a'];
        // i -> "a"
        // j -> undefined
        // k -> []
    </script>

    <h4>解构赋值中的默认值</h4>
    <script type="text/javascript">
        let [foo = true] = [];      // foo = true

        let [x1, y1 = 'b'] = ['a']; // x1='a', y1='b'
        let [x2, y2 = 'b'] = ['a', undefined]; // x2='a', y2='b'

        let [x3 = 1] = [undefined]; // x3=1

        let [x4 = 1] = [null];      // x4=null
    </script>

    <h4>对象的解构赋值</h4>
    <script type="text/javascript">
        let { bar, foo } = { bar: "bbb", foo: "aaa" };// foo = "aaa", bar = "bbb"

        let { baz } = { foo: "aaa", bar: "bbb" };// baz = undefined


        var { foo: baz } = { foo: 'aaa', bar: 'bbb' };// baz = "aaa"


        let obj = { first: 'hello', last: 'world' };
        let { first: f, last: l } = obj;// f = 'hello', l = 'world'


    </script>


    <h4>嵌套结构对象的解构赋值</h4>
    <script type="text/javascript">
        let obj = {
            p: [
                'Hello',
                { y: 'World' }
            ]
        };

        let { p: [x, { y }] } = obj;
        // x -> "Hello"
        // y -> "World"
        // p -> error: p is undefined
    </script>

    <h4>字符串的解构赋值</h4>
    <script type="text/javascript">
        const [a, b, c, d, e] = 'hello';
        // a -> "h"
        // b -> "e"
        // c -> "l"
        // d -> "l"
        // e -> "o"

        let {length : len} = 'hello';
        // len -> 5
    </script>

    <h4>数值和布尔值的解构赋值</h4>
    <script type="text/javascript">
        let {toString: s1} = 123;
        console.log(s1 === Number.prototype.toString); // true

        let {toString: s2} = true;
        console.log(s2 === Boolean.prototype.toString); // true
    </script>

    <h4>函数参数的解构赋值</h4>
    <script type="text/javascript">
        function add([x, y]){
            return x + y;
        }

        console.log(add([1, 2])); // 3
    </script>


    <h4>交换变量的值</h4>
    <script type="text/javascript">
        let x = 1;
        let y = 2;

        [x, y] = [y, x];
    </script>

    <h4>从函数返回多个值</h4>
    <script type="text/javascript">
        // 返回一个数组
        function example1() {
            return [1, 2, 3];
        }
        let [a, b, c] = example1();

        // 返回一个对象
        function example2() {
            return {
                foo: 1,
                bar: 2
            };
        }
        let { foo, bar } = example2();
    </script>

    <h4>函数参数的定义</h4>
    <script type="text/javascript">
        // 参数是一组有次序的值
        function func1([x, y, z]) { /*...*/ }
        func1([1, 2, 3]);

        // 参数是一组无次序的值
        function func2({x, y, z}) { /*...*/ }
        func2({z: 3, y: 2, x: 1});
    </script>

    <h4>提取JSON数据</h4>
    <script type="text/javascript">
        let jsonData = {
            id: 42,
            status: "OK",
            data: [867, 5309]
        };

        let { id, status, data: number } = jsonData;

        console.log(id, status, number);
        // 42, "OK", [867, 5309]
    </script>

    <h4>函数参数的默认值</h4>
    <script type="text/javascript">
        jQuery.ajax = function (url, {
            async = true,
            beforeSend = function () {},
            cache = true,
            complete = function () {},
            crossDomain = false,
            global = true,
            // ... more config
        }) {
            // ... do stuff
        };
    </script>

    <h4>遍历Map结构</h4>
    <script type="text/javascript">
        let map = new Map();
        map.set('first', 'hello');
        map.set('second', 'world');

        for (let [key, value] of map) {
            console.log(key + " is " + value);
        }
        // first is hello
        // second is world


        // 获取键名
        for (let [key] of map) {
            // ...
        }

        // 获取键值
        for (let [,value] of map) {
            // ...
        }

    </script>


    <h4>输入模块的指定方法</h4>
    <script type="text/javascript">
        const { SourceMapConsumer, SourceNode } = require("source-map");
    </script>

</div>
</body>
</html>


