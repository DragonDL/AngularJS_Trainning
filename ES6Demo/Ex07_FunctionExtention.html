<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ECMAScript 6 Demo</title>

    <link rel="stylesheet" href="./styles/bootstrap.css">
    <link rel="stylesheet" href="./styles/main.css">

    <script type="text/javascript">
    </script>
</head>
<body>
<div class="container" >
    <h2>ECMAScript 6 Demo</h2>
    <hr />
    <h3>函数的扩展</h3>

    <!--<h4>函数参数的默认值</h4>-->
    <!--<script type="text/javascript">-->

<!--//        function log(x, y = 'World') {-->
<!--//            console.log(x, y);-->
<!--//        }-->
<!--//-->
<!--//        log('Hello');           // Hello World-->
<!--//        log('Hello', 'China');  // Hello China-->
<!--//        log('Hello', '');       // Hello-->
<!--//-->
<!--//        let x = 99;-->
<!--//        function foo(p = x + 1) {-->
<!--//            console.log(p);-->
<!--//        }-->
<!--//-->
<!--//        foo(); // 100-->
<!--//-->
<!--//        x = 100;-->
<!--//        foo(); // 101-->
<!--//-->
<!--//-->
<!--//        // 与解构赋值的默认值结合使用-->
<!--//        function fetch(url, { body = '', method = 'GET', headers = {} } = {}) {-->
<!--//            console.log(method);-->
<!--//        }-->
<!--//-->
<!--//        fetch('http://example.com');-->
<!--//        // "GET"-->
<!--//-->
<!--//-->
<!--//        function f(x = 1, y) {-->
<!--//            return [x, y];-->
<!--//        }-->
<!--//-->
<!--//        f(); // [1, undefined]-->
<!--//        f(2); // [2, undefined])-->
<!--//        // f(, 1); // 报错-->
<!--//        f(undefined, 1); // [1, 1]-->
<!--//-->
<!--//        let len1 = (function (a) {}).length; // 1-->
<!--//        let len2 = (function (a = 5) {}).length; // 0-->
<!--//        let len3 = (function (a, b, c = 5) {}).length; // 2-->


        <!--var x = 1;-->
        <!--function f(x, y = x) {-->
            <!--console.log(y);-->
        <!--}-->

        <!--f(2); // 2-->

    <!--</script>-->



    <!--<h4>rest参数</h4>-->
    <!--<script type="text/javascript">-->

<!--//        function add(...values) {-->
<!--//            let sum = 0;-->
<!--//            for (let val of values) {-->
<!--//                sum += val;-->
<!--//            }-->
<!--//            return sum;-->
<!--//        }-->
<!--//-->
<!--//        let res = add(2, 5, 3); // 10-->


        <!--function add(x, y) {-->
            <!--return x + y;-->
        <!--}-->

        <!--let numbers = [4, 38];-->
        <!--add(...numbers) // 42-->

    <!--</script>-->


    <!--<h4>扩展运算符的应用</h4>-->
    <!--<script type="text/javascript">-->

        <!--// 合并数组-->
        <!--let arr1 = ['a', 'b'];-->
        <!--let arr2 = ['c'];-->
        <!--let arr3 = ['d', 'e'];-->

        <!--let arr = [...arr1, ...arr2, ...arr3];-->
        <!--// [ 'a', 'b', 'c', 'd', 'e' ]-->


        <!--// 与解构赋值结合-->
        <!--const [first1, ...rest1] = [1, 2, 3, 4, 5];-->
        <!--console.log(first1); // 1-->
        <!--console.log(rest1);  // [2, 3, 4, 5]-->

        <!--const [first2, ...rest2] = [];-->
        <!--console.log(first2); // undefined-->
        <!--console.log(rest2);  // []-->

        <!--const [first3, ...rest3] = ["foo"];-->
        <!--console.log(first3);  // "foo"-->
        <!--console.log(rest3);   // []-->


        <!--// 函数的返回值-->
        <!--let stuDataString = "1,Tom,21";-->
        <!--function printStudentInfo(id, name, age) {-->
            <!--// ...-->
        <!--}-->

        <!--let stuDataArray = stuDataString.split(",");-->
        <!--printStudentInfo(...stuDataArray);-->

        <!--// 字符串-->
        <!--let chars = [...'hello'];-->
        <!--// [ "h", "e", "l", "l", "o" ]-->

        <!--let len1 = 'x\uD83D\uDE80y'.length;         // 4-->
        <!--let len2 = [...'x\uD83D\uDE80y'].length;    // 3-->


        <!--// 实现了Iterator接口的对象-->
        <!--let nodeList = document.querySelectorAll('div');-->
        <!--let array1 = [...nodeList];-->

        <!--let map = new Map([-->
            <!--[1, 'one'], [2, 'two'], [3, 'three'],-->
        <!--]);-->
        <!--let array2 = [...map.keys()]; // [1, 2, 3]-->

        <!--let go = function*(){-->
            <!--yield 1; yield 2; yield 3;-->
        <!--};-->
        <!--let array3 = [...go()]; // [1, 2, 3]-->

    <!--</script>-->


    <h4>箭头函数</h4>
    <script type="text/javascript">

        // 箭头函数基本用法
        let func1 = v => v;
        // 相当于
        let func1_ = function(v) { return v; };

        let func2 = () => 5;
        // 相当于
        let func2_ = function() { return 5; };

        let func3 = (x, y) => x + y;
        // 相当于
        let func3_ = function(x, y) { return x + y; };


        let func4 = (x, y) => {
            // do something
            return x + y;
        };

        let func5 = id => ({ id: id, name: "Temp" });

        let func6 = ({ first, last }) => first + ' ' + last;


        // ES5嵌套函数写法
        function insert_es5(value) {
            return {into: function (array) {
                return {after: function (afterValue) {
                    array.splice(array.indexOf(afterValue) + 1, 0, value);
                    return array;
                }};
            }};
        }
        insert_es5(2).into([1, 3]).after(1); //[1, 2, 3]

        // ES6嵌套箭头函数写法
        let insert_es6 = (value) => ({into: (array) => ({after: (afterValue) => {
            array.splice(array.indexOf(afterValue) + 1, 0, value);
            return array;
        }})});

        insert_es6(2).into([1, 3]).after(1); //[1, 2, 3]

    </script>

</div>
</body>
</html>


